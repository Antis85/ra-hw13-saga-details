(this["webpackJsonpra-hw13-saga-details"]=this["webpackJsonpra-hw13-saga-details"]||[]).push([[0],{37:function(e,t,r){"use strict";r.r(t);var n=r(1),a=r(17),c=r.n(a),i=r(13),s=r(5),u=r(9),o=r(4),b="REMOVE_SERVICE",j="CHANGE_ADD_FIELD",l="CHANGE_EDIT_FIELD",d="FILTER_SERVICE",p="CHANGE_FILTER_FIELD",O="CLEAR_FORM",f="CLEAR_FILTER",v="FETCH_SERVICES_REQUEST",x="FETCH_SERVICES_SUCCESS",h="FETCH_SERVICES_FAILED",m="ADD_SERVICES_REQUEST",E="ADD_SERVICES_SUCCESS",y="ADD_SERVICES_FAILED",g="EDIT_SERVICES_REQUEST",w="EDIT_SERVICES_SUCCESS",k="EDIT_SERVICES_FAILED";function S(){return{type:O}}function C(){return{type:v}}function _(e){return{type:x,payload:{services:e}}}function I(e){return{type:h,payload:{error:e}}}function F(e){return{type:g,payload:Object(o.a)({},e)}}function T(e){return{type:w,payload:{item:e}}}function D(e){return{type:k,payload:{error:e}}}var R=r.p+"static/media/mcru-ajax-loader.6f9ac78c.gif",L=r(2);function A(){return Object(L.jsx)("div",{className:"loader",children:Object(L.jsx)("img",{src:R,alt:"LOADING..."})})}function N(){var e=Object(u.c)((function(e){return e.serviceEdit})),t=e.item,r=e.loading,a=e.error,c=e.redirect,i=Object(s.g)(),o=Object(s.h)(),b=Object(u.b)();Object(n.useEffect)((function(){b(F({id:o.id}))}),[b,o.id]),Object(n.useEffect)((function(){c&&i("/")}),[i,c]);var j=function(e){var t=e.target,r=t.name,n=t.value;b(function(e,t){return{type:l,payload:{name:e,value:t}}}(r,n))};return Object(L.jsxs)(L.Fragment,{children:[r&&Object(L.jsx)(A,{}),a&&Object(L.jsxs)("div",{children:[a,Object(L.jsx)("button",{onClick:function(){b(F({id:o.id}))},children:"\u041f\u043e\u043f\u0440\u043e\u0431\u043e\u0432\u0430\u0442\u044c \u0441\u043d\u043e\u0432\u0430"})]}),!r&&!a&&Object(L.jsxs)("form",{onSubmit:function(e){e.preventDefault(),!t.name||!t.price||t.price<=0||b(F({item:t}))},onReset:function(e){b(S()),i("/")},children:[Object(L.jsx)("h3",{children:"Edit service:"}),Object(L.jsxs)("label",{children:["Name ",Object(L.jsx)("input",{name:"name",onChange:j,value:t.name})]}),Object(L.jsxs)("label",{children:["Price",Object(L.jsx)("input",{name:"price",type:"number",onChange:j,value:t.price})]}),Object(L.jsxs)("label",{children:["Content",Object(L.jsx)("input",{name:"content",onChange:j,value:t.content})]}),Object(L.jsx)("button",{type:"submit",disabled:r||!t.name||!t.price||t.price<=0,children:"Save"}),Object(L.jsx)("button",{type:"reset",disabled:r,children:"Close"})]})]})}function V(){var e=Object(u.c)((function(e){return e.serviceAdd})),t=e.item,r=e.loading,n=e.error,a=Object(u.b)(),c=function(e){var t=e.target,r=t.name,n=t.value;a(function(e,t){return{type:j,payload:{name:e,value:t}}}(r,n))};return Object(L.jsxs)("form",{onSubmit:function(e){e.preventDefault(),!t.name||!t.price||t.price<=0||a(function(e){return{type:m,payload:{item:e}}}(t))},onReset:function(e){a(S())},children:[Object(L.jsx)("h3",{children:"Add service:"}),Object(L.jsxs)("label",{children:["Name ",Object(L.jsx)("input",{name:"name",onChange:c,value:t.name})]}),Object(L.jsxs)("label",{children:["Price",Object(L.jsx)("input",{name:"price",type:"number",onChange:c,value:t.price})]}),Object(L.jsx)("button",{type:"submit",disabled:r||!t.name||!t.price||t.price<=0,children:"Save"}),Object(L.jsx)("button",{type:"reset",disabled:r,children:"Cancel"}),Object(L.jsx)("div",{children:n})]})}function U(){var e=Object(u.c)((function(e){return e.serviceFilter})).filter,t=Object(u.c)((function(e){return e.serviceList})).activeFilter,r=Object(u.b)();return Object(L.jsx)("label",{children:Object(L.jsxs)("form",{onSubmit:function(t){t.preventDefault(),r({type:d,payload:{setFilter:e}})},onReset:function(){r({type:f})},children:[Object(L.jsx)("h3",{children:"Filter services:"}),Object(L.jsxs)("div",{children:["Active filter: ",t?'"'.concat(t,'"'):"NO"]}),Object(L.jsx)("input",{name:"filter",onChange:function(e){var t=e.target.value;r(function(e){return{type:p,payload:{filter:e}}}(t))},value:e}),Object(L.jsx)("button",{type:"submit",children:"Set"}),Object(L.jsx)("button",{type:"reset",children:"Clear"})]})})}function H(){var e=Object(u.c)((function(e){return e.serviceList})),t=e.services,r=e.activeFilter,a=e.loading,c=e.error,i=Object(s.g)(),o=Object(u.b)();Object(n.useEffect)((function(){o(C())}),[o]);var j=function(e){o(function(e){return{type:b,payload:{id:e}}}(e))},l=r&&t.filter((function(e){return e.name.toLowerCase().includes(r.toLowerCase())})),d=(l.length?l:t).map((function(e){return Object(L.jsxs)("li",{children:[e.name," ",e.price,Object(L.jsx)("button",{disabled:e.loading,onClick:function(){var t;(t=e.id)&&i("/"+t+"/details")},children:"\u270e"}),Object(L.jsx)("button",{disabled:e.loading,onClick:function(){return j(e.id)},children:"\u2715"})]},e.id)}));return Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(V,{}),Object(L.jsx)(U,{}),a&&Object(L.jsx)(A,{}),c&&Object(L.jsxs)("div",{children:[c,Object(L.jsx)("button",{onClick:function(){o(C())},children:"\u041f\u043e\u043f\u0440\u043e\u0431\u043e\u0432\u0430\u0442\u044c \u0441\u043d\u043e\u0432\u0430"})]}),!a&&!c&&Object(L.jsx)("ul",{children:!l.length&&r?"Nothing to display. Try another filter string!":d})]})}function P(){return Object(L.jsxs)("div",{className:"page-404",children:[Object(L.jsx)("div",{className:"page-404__header",children:"404"}),Object(L.jsx)("div",{className:"page-404__main",children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430..."}),Object(L.jsx)(i.b,{to:"/",children:"\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u043d\u0430 \u0433\u043b\u0430\u0432\u043d\u0443\u044e \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443"})]})}r(35);function G(){return Object(L.jsx)(i.a,{children:Object(L.jsx)("div",{className:"page",children:Object(L.jsxs)(s.d,{children:[Object(L.jsx)(s.b,{path:"/:id/details",element:Object(L.jsx)(N,{})}),Object(L.jsx)(s.b,{path:"/services",element:Object(L.jsx)(H,{})}),Object(L.jsx)(s.b,{path:"/",element:Object(L.jsx)(s.a,{to:"/services"})}),Object(L.jsx)(s.b,{path:"*",element:Object(L.jsx)(P,{})})]})})})}var J=r(12),M={services:[],activeFilter:"",loading:!1,error:null};var Q=r(14),X={item:{name:"",price:""},loading:!1,error:null};var B={item:{id:"",name:"",price:"",content:""},loading:!1,error:null,redirect:!1};var q={filter:""};var z=r(6),K=r.n(z),W=r(8),Y=r(16),Z="https://antis-ra-hw-thunk.herokuapp.com/api/services",$=function(){var e=Object(Y.a)(K.a.mark((function e(){var t;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(Z);case 2:if((t=e.sent).ok){e.next=5;break}throw new Error(t.statusText);case 5:return e.next=7,t.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ee=function(){var e=Object(Y.a)(K.a.mark((function e(t){var r;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(Z,"/").concat(t));case 2:if((r=e.sent).ok){e.next=5;break}throw new Error(r.statusText);case 5:return e.next=7,r.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),te=function(){var e=Object(Y.a)(K.a.mark((function e(t){var r;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(Z,{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(Object(o.a)(Object(o.a)({},t),{},{id:0}))});case 2:if((r=e.sent).ok){e.next=5;break}throw new Error(r.statusText);case 5:return e.abrupt("return",r.ok);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),re=function(){var e=Object(Y.a)(K.a.mark((function e(t){var r;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(Z,{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(Object(o.a)({},t))});case 2:if((r=e.sent).ok){e.next=5;break}throw new Error(r.statusText);case 5:return e.abrupt("return",r.ok);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ne=function(){var e=Object(Y.a)(K.a.mark((function e(t){var r;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(Z,"/").concat(t),{method:"DELETE"});case 2:if((r=e.sent).ok){e.next=5;break}throw new Error(r.statusText);case 5:return e.abrupt("return",r.ok);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ae=K.a.mark(ve),ce=K.a.mark(xe),ie=K.a.mark(he),se=K.a.mark(me),ue=K.a.mark(Ee),oe=K.a.mark(ye),be=K.a.mark(ge),je=K.a.mark(we),le=K.a.mark(ke),de=K.a.mark(Se),pe=K.a.mark(Ce),Oe=K.a.mark(_e),fe=K.a.mark(Ie);function ve(){var e;return K.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(W.a)($);case 3:return e=t.sent,t.next=6,Object(W.b)(_(e));case 6:t.next=12;break;case 8:return t.prev=8,t.t0=t.catch(0),t.next=12,Object(W.b)(I(t.t0.message));case 12:case"end":return t.stop()}}),ae,null,[[0,8]])}function xe(){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(W.e)(v,ve);case 2:case"end":return e.stop()}}),ce)}function he(e){var t,r;return K.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t=e.payload.id,n.prev=1,!t){n.next=8;break}return n.next=5,Object(W.a)(ee,t);case 5:return r=n.sent,n.next=8,Object(W.b)(T(r));case 8:n.next=14;break;case 10:return n.prev=10,n.t0=n.catch(1),n.next=14,Object(W.b)(D(n.t0.message));case 14:case"end":return n.stop()}}),ie,null,[[1,10]])}function me(){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(W.e)(g,he);case 2:case"end":return e.stop()}}),se)}function Ee(e){var t;return K.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload.item,r.prev=1,r.next=4,Object(W.a)(te,t);case 4:if(!r.sent){r.next=8;break}return r.next=8,Object(W.b)({type:E});case 8:r.next=14;break;case 10:return r.prev=10,r.t0=r.catch(1),r.next=14,Object(W.b)((n=r.t0.message,{type:y,payload:{error:n}}));case 14:case"end":return r.stop()}var n}),ue,null,[[1,10]])}function ye(){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(W.d)(m,Ee);case 2:case"end":return e.stop()}}),oe)}function ge(){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(W.b)(C());case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),e.next=9,Object(W.b)(I(e.t0.message));case 9:case"end":return e.stop()}}),be,null,[[0,5]])}function we(){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(W.d)(E,ge);case 2:case"end":return e.stop()}}),je)}function ke(e){var t;return K.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t=e.payload.id,r.prev=1,!t){r.next=9;break}return r.next=5,Object(W.a)(ne,t);case 5:if(!r.sent){r.next=9;break}return r.next=9,Object(W.b)(C());case 9:r.next=15;break;case 11:return r.prev=11,r.t0=r.catch(1),r.next=15,Object(W.b)(I(r.t0.message));case 15:case"end":return r.stop()}}),le,null,[[1,11]])}function Se(){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(W.d)(b,ke);case 2:case"end":return e.stop()}}),de)}function Ce(e){var t;return K.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t=e.payload.item,r.prev=1,!t){r.next=9;break}return r.next=5,Object(W.a)(re,t);case 5:if(!r.sent){r.next=9;break}return r.next=9,Object(W.b)(T());case 9:r.next=15;break;case 11:return r.prev=11,r.t0=r.catch(1),r.next=15,Object(W.b)(D(r.t0.message));case 15:case"end":return r.stop()}}),pe,null,[[1,11]])}function _e(){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(W.e)(g,Ce);case 2:case"end":return e.stop()}}),Oe)}function Ie(){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(W.c)(xe);case 2:return e.next=4,Object(W.c)(me);case 4:return e.next=6,Object(W.c)(ye);case 6:return e.next=8,Object(W.c)(we);case 8:return e.next=10,Object(W.c)(Se);case 10:return e.next=12,Object(W.c)(_e);case 12:case"end":return e.stop()}}),fe)}var Fe=r(23),Te=Object(J.b)({serviceList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return Object(o.a)(Object(o.a)({},e),{},{loading:!0,error:null});case x:var r=t.payload.services;return Object(o.a)(Object(o.a)({},e),{},{loading:!1,services:r});case h:var n=t.payload.error;return Object(o.a)(Object(o.a)({},e),{},{loading:!1,error:n});case b:var a=t.payload.id,c=e.services.find((function(e){return e.id===a}));return c&&(c.loading=!0),Object(o.a)({},e);case d:var i=t.payload.setFilter;return Object(o.a)(Object(o.a)({},e),{},{activeFilter:i});case f:return Object(o.a)(Object(o.a)({},e),{},{activeFilter:M.activeFilter});default:return e}},serviceAdd:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j:var r=t.payload,n=r.name,a=r.value;return Object(o.a)(Object(o.a)({},e),{},{item:Object(o.a)(Object(o.a)({},e.item),{},Object(Q.a)({},n,a))});case O:return Object(o.a)(Object(o.a)({},e),{},{item:X.item});case E:return Object(o.a)({},X);case m:return Object(o.a)(Object(o.a)({},e),{},{loading:!0,error:null});case y:var c=t.payload.error;return Object(o.a)(Object(o.a)({},e),{},{loading:!1,error:c});default:return e}},serviceEdit:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l:var r=t.payload,n=r.name,a=r.value;return Object(o.a)(Object(o.a)({},e),{},{item:Object(o.a)(Object(o.a)({},e.item),{},Object(Q.a)({},n,a))});case O:return Object(o.a)(Object(o.a)({},e),{},{item:B.item});case w:var c=t.payload.item;return c&&c.id?Object(o.a)(Object(o.a)({},e),{},{item:Object(o.a)(Object(o.a)({},c),{},{content:c.content||""}),loading:!1,redirect:!1}):Object(o.a)(Object(o.a)({},B),{},{redirect:!0});case g:return Object(o.a)(Object(o.a)({},e),{},{loading:!0,error:null});case k:var i=t.payload.error;return Object(o.a)(Object(o.a)({},e),{},{loading:!1,error:i});default:return e}},serviceFilter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:var r=t.payload.filter;return Object(o.a)(Object(o.a)({},e),{},{filter:r});case f:return Object(o.a)({},q);default:return e}}}),De=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||J.c,Re=Object(Fe.a)(),Le=Object(J.d)(Te,De(Object(J.a)(Re)));Re.run(Ie);var Ae=Le;c.a.render(Object(L.jsx)(u.a,{store:Ae,children:Object(L.jsx)(G,{})}),document.getElementById("root"))}},[[37,1,2]]]);
//# sourceMappingURL=main.2bdb17c1.chunk.js.map